<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Note App</title>
    <link rel="stylesheet" href="./style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div id="view_Note"></div>
    <div id="disp"></div>
    <section class="section_one">
      <nav class="navbar py-4">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <h3 class="text-light fs-1">Notes</h3>
          </a>
          <form class="form">
            <button>
              <svg
                width="17"
                height="16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                role="img"
                aria-labelledby="search"
              >
                <path
                  d="M7.667 12.667A5.333 5.333 0 107.667 2a5.333 5.333 0 000 10.667zM14.334 14l-2.9-2.9"
                  stroke="currentColor"
                  stroke-width="1.333"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
              </svg>
            </button>
            <input
              class="inputNote"
              placeholder="Search notes"
              required=""
              type="text"
            />
            <button class="reset" type="reset">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
          </form>
        </div>
      </nav>

      <div class="container">
        <div class="row">
          <div class="col-sm-12">
            <div class="get-overflow">
              <div id="displayNote"></div>
            </div>
          </div>
        </div>
      </div>

      <nav class="navbar fixed-bottom">
        <div class="container-fluid">
          <button
            type="button"
            class="btnStyle"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasNavbar"
            aria-controls="offcanvasNavbar"
            aria-label="Toggle navigation"
          >
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
              >
                <path fill="none" d="M0 0h24v24H0z"></path>
                <path
                  fill="currentColor"
                  d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"
                ></path>
              </svg>
            </span>
          </button>
          <div
            class="offcanvas offcanvas-end"
            tabindex="-1"
            id="offcanvasNavbar"
            aria-labelledby="offcanvasNavbarLabel"
          >
            <div class="offcanvas-header">
              <!-- <i class="bi bi-arrow-left"></i> -->
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="offcanvas"
                aria-label="Close"
              ></button>
              <div id="saveIcon"></div>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a
                    class="nav-link text-light active fs-2"
                    aria-current="page"
                    href="#"
                    >Notes</a
                  >
                </li>
                <div class="Newform">
                  <input
                    class="inputTitle"
                    placeholder="Title"
                    id="userTitle"
                    required=""
                    type="text"
                  />
                  <span class="input-border"></span>
                </div>
                <div class="Newform1">
                  <textarea
                    name=""
                    class="inputNote col-12"
                    required
                    placeholder="Note something down"
                    id="userNote"
                    onkeydown="getOption()"
                    cols="30"
                    rows="10"
                  ></textarea>
                  <span class="input-border"></span>
                </div>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <nav class="navbar bottom-nav fixed-bottom w-100 col-12">
        <div class="px-5 container-fluid">
          <a
            class="text-light d-grid text-center navbar-brand py-1"
            href="./note.html"
          >
            <i class="fs- bi bi-card-text"></i>
            Notes
          </a>
          <a class="text-light d-grid text-center navbar-brand py-1" href="#">
            <i class="fs- bi bi-check2-circle"></i>
            To-dos
          </a>
        </div>
      </nav>
    </section>

    <script>
      // let noteStorage = localStorage.setNote
      //   ? JSON.parse(localStorage.setNote)
      //   : [];
      document.addEventListener("DOMContentLoaded", () => {
        noteStorage = JSON.parse(localStorage.getItem("setNote")) || [];

        //     if (taskArray.length == 0) {
        //       get_message.className="alert alert-info mt-3"
        //       get_message.innerHTML="<h5 class='text-center  fw-bold '>NO TASK IS ADDED YET</h5>"
        // }

        getFixed();
      });

      function getOption() {
        saveIcon.innerHTML = `
          <i class="bi save-color fs-1 bi-check2"></i>
          `;
        document.querySelector(".save-color").addEventListener("click", () => {
          let details = {
            title: userTitle.value,
            note: userNote.value,
          };
          noteStorage.push(details);
          localStorage.setItem("setNote", JSON.stringify(noteStorage));
          console.log(noteStorage);
          userNote.value = "";
          userTitle.value = "";
          document.querySelector(".save-color").style.display = "none";
          getFixed();
        });
      }
      function getFixed() {
        displayNote.innerHTML = "";
        noteStorage.map((eachNoted, i) => {
          // localStorage.setItem(("setNewNote",i))
          displayNote.innerHTML += `
            <button type="button"  data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="viewNote(${i})" class="text-light text-start col-12 px-3 noteContainer py-2 mt-3 mb-5">
              <h4 class="h4-size">${eachNoted.title}</h4>
            <div><p>
              ${eachNoted.note}
              </p></div>
            </button>
            
        `;
        });
      }

      function viewNote(getEachNote) {
  let noteCheck = noteStorage[getEachNote];
  console.log(noteCheck);

  // Check if the view modal already exists, and if so, remove it
  const existingModal = document.getElementById("exampleModal");
  if (existingModal) {
    existingModal.remove();
  }

  // Create the view modal
  const modalContent = `
    <div class="modal bg-dark fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-dark">
            <h1 class="modal-title fs-5 text-light" id="exampleModalLabel">Notes</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <h5 class="text-light">${noteCheck.title}</h5>
            <p class="text-light">${noteCheck.note}</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  `;


  document.body.insertAdjacentHTML("beforeend", modalContent);
  const modal = new bootstrap.Modal(document.getElementById("exampleModal"));
  modal.show();
}
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
